(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{374:function(e,n,s){"use strict";s.r(n);var t=s(45),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"ci-cd-pipeline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ci-cd-pipeline"}},[e._v("#")]),e._v(" CI/CD pipeline")]),e._v(" "),s("p",[e._v("You can use digger CLI within your CI/CD pipeline within your favourite tools such as Github Actions, CircliCI or TravicCI. In the snippet bellow we show an example of a github action which will release your service "),s("code",[e._v("svc1")]),e._v(" on push. You can see a full GH workflow example in our "),s("a",{attrs:{href:"https://github.com/diggerhq/django-todolist/blob/master/.github/workflows/deploy.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("TODO example repository"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('name: Digger CI\non:\n  push:\n    branches: [master]\n\n\n  build-push-release:\n    runs-on: ubuntu-16.04\n    needs:\n      - get_tag_version\n    steps:\n    - name: Checkout\n      uses: actions/checkout@v1\n\n    - name: Configure AWS credentials\n      uses: aws-actions/configure-aws-credentials@v1\n      with:\n        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: eu-west-1\n\n    - name: Set up Python 3.8\n      uses: actions/setup-python@v2\n      with:\n        python-version: \'3.8\'\n\n    - name: Build and push and release\n      env:\n        DIGGER_TOKEN: ${{ secrets.DIGGER_TOKEN }}\n        DIGGER_AWS_KEY: ${{ secrets.DIGGER_AWS_KEY }}\n        DIGGER_AWS_SECRET: ${{ secrets.DIGGER_AWS_SECRET }}\n        BACKEND_ENDPOINT: "https://backend.digger.dev"\n        WEBAPP_ENDPOINT: "https://app.digger.dev"\n      run: |\n        export TAG_VERSION=${{needs.get_tag_version.outputs.tag_version}} \n\n        # Install diggercli\n        pip install --upgrade git+https://github.com/diggerhq/cli@master\n\n        echo "> Building docker image"\n        dg env build stage --service svc1\n        echo "> Pushing docker image to ECR"    \n        dg env push stage --service svc1 --aws-key "$DIGGER_AWS_KEY" --aws-secret "$DIGGER_AWS_SECRET"\n        echo "> Releasing"    \n        dg env push release --service svc1 --aws-key "$DIGGER_AWS_KEY" --aws-secret "$DIGGER_AWS_SECRET"\n\n\n')])])])])}),[],!1,null,null,null);n.default=a.exports}}]);