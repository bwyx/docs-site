<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Write your own Terraform</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.54d80d9b.css" as="style"><link rel="preload" href="/assets/js/app.b07357c6.js" as="script"><link rel="preload" href="/assets/js/2.11174f41.js" as="script"><link rel="preload" href="/assets/js/10.b253edbe.js" as="script"><link rel="prefetch" href="/assets/js/11.422a04cc.js"><link rel="prefetch" href="/assets/js/12.ec296e32.js"><link rel="prefetch" href="/assets/js/13.94198388.js"><link rel="prefetch" href="/assets/js/14.9957d544.js"><link rel="prefetch" href="/assets/js/15.30b921e2.js"><link rel="prefetch" href="/assets/js/16.021537f8.js"><link rel="prefetch" href="/assets/js/17.89c23169.js"><link rel="prefetch" href="/assets/js/18.9e3edfeb.js"><link rel="prefetch" href="/assets/js/19.81e48175.js"><link rel="prefetch" href="/assets/js/20.bcf4e4cb.js"><link rel="prefetch" href="/assets/js/21.76329c4a.js"><link rel="prefetch" href="/assets/js/3.bb629bc1.js"><link rel="prefetch" href="/assets/js/4.4dc5086f.js"><link rel="prefetch" href="/assets/js/5.06420f4a.js"><link rel="prefetch" href="/assets/js/6.58e44b89.js"><link rel="prefetch" href="/assets/js/7.055367f9.js"><link rel="prefetch" href="/assets/js/8.61820209.js"><link rel="prefetch" href="/assets/js/9.678f52b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.54d80d9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/digger-logo-text.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/overview/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/overview/how-it-works.html" class="sidebar-link">How It Works</a></li><li><a href="/overview/digger-vs-other.html" class="sidebar-link">Digger vs Other</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Get Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getting-started/installation.html" class="sidebar-link">Install Digger CLI</a></li><li><a href="/getting-started/node-express.html" class="sidebar-link">Run a Node.js app</a></li><li><a href="/getting-started/django.html" class="sidebar-link">Run a Django app</a></li><li><a href="/getting-started/secrets.html" class="sidebar-link">Secrets</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Customize</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/customize/terraform.html" aria-current="page" class="active sidebar-link">Write your own Terraform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/terraform.html#terraform-overrides" class="sidebar-link">Terraform overrides</a></li><li class="sidebar-sub-header"><a href="/customize/terraform.html#custom-target" class="sidebar-link">Custom Target</a></li></ul></li><li><a href="/customize/cicd.html" class="sidebar-link">CI/CD Integrations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/cicd.html#github-actions" class="sidebar-link">Github Actions</a></li><li class="sidebar-sub-header"><a href="/customize/cicd.html#gitlab-ci" class="sidebar-link">Gitlab CI</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-cli.html" class="sidebar-link">CLI reference</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-auth" class="sidebar-link">dg auth</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-project-init" class="sidebar-link">dg project init</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-sync" class="sidebar-link">dg sync</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-service-add" class="sidebar-link">dg service add</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-build-env-name" class="sidebar-link">dg env build env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-push-env-name" class="sidebar-link">dg env push env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-release-env-name" class="sidebar-link">dg env release env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-create-env-name" class="sidebar-link">dg env create env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-plan-env-name" class="sidebar-link">dg env plan env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-apply-env-name" class="sidebar-link">dg env apply env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-update-env-name" class="sidebar-link">dg env update env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-destroy-env-name" class="sidebar-link">dg env destroy env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-describe-env-name" class="sidebar-link">dg env describe env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-list" class="sidebar-link">dg env list</a></li></ul></li><li><a href="/reference-yaml.html" class="sidebar-link">digger.yml reference</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-yaml.html#structure" class="sidebar-link">Structure</a></li><li class="sidebar-sub-header"><a href="/reference-yaml.html#defining-resource-dependencies" class="sidebar-link">Defining Resource dependencies</a></li><li class="sidebar-sub-header"><a href="/reference-yaml.html#using-existing-resources" class="sidebar-link">Using existing resources</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/misc/tagging-and-rollbacks.html" class="sidebar-link">Image tagging rollbacks</a></li><li><a href="/misc/composing-terraform-templates.html" class="sidebar-link">Terraform Templates</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="write-your-own-terraform"><a href="#write-your-own-terraform" class="header-anchor">#</a> Write your own Terraform</h1> <p>Digger does not limit you to the buttons of its UI and commands of its CLI. Every team at some point needs to build something unique to their business. We recognise that and make it quite straightforward. Building custom infrastructure with Digger is not any harder than doing it on AWS directly - and you still benefit from centralised state and configuration management provided by Digger.</p> <p>There are 2 ways to build custom infrastructure with Digger:</p> <ol><li>Terraform overrides in your Infrastructure Repository</li> <li>Custom template (either fork one of Digger's standard Targets or build your own)</li></ol> <h2 id="terraform-overrides"><a href="#terraform-overrides" class="header-anchor">#</a> Terraform overrides</h2> <p>This is the preferred way to build custom infrastructure with Digger unless you know fur sure that you will not need the resources provided by one of the default templates (Targets) provided by Digger.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Terraform overrides require a connected Infrastructure Repository. You can do that in Settings.</p></div> <p>To add ad custom Terraform, simply push a fulder named <code>_digger_custom</code> into your Infrastructure Repository. If you want your Terraform to be rendered in all environments, put it into the <code>_shared</code> subfolder. And if it's for one environment only, put it into a subfolder named <code>environment-{environmentId}</code>. Digger will pick up changes from it and render your Terraform alongside the target defaults. If the name of a resource in your code is the same as in Digger-generated code (it's in the same repository), Digger will ignore the generated resource and render yours instead.</p> <p>Example folder structure in the Infrastructure Repository:</p> <div class="language- extra-class"><pre class="language-text"><code>_digger_custom
    _shared
    environment-production
    environment-staging
    environment-dev
_digger_generated
    environment-production
    environment-staging
    environment-dev
digger.yml
digger-config.yml
</code></pre></div><h2 id="custom-target"><a href="#custom-target" class="header-anchor">#</a> Custom Target</h2> <p>Targets are repositories with templated Terraform modules that Digger uses to generate output Terraform for your environments.</p> <p>This is more work compared to Terraform Overrides option since you'll have to define all the infrastructure yourself. But it also gives you the most flexibility. It also makes the most sense if you are already using Terraform and want to use it with Digger.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It may be easier to start out by forking one of Digger's default templates (Targets) which are open source - <a href="https://github.com/diggerhq/target-fargate" target="_blank" rel="noopener noreferrer">this one for example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p>When you have built your custom target, all you need to do is to point Digger to it when creating an environment.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>At the moment custom targets are only supported in the CLI but not in Web UI. You will need to create your environment with the CLI to use Custom Targets.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/getting-started/secrets.html" class="prev">
        Secrets
      </a></span> <span class="next"><a href="/customize/cicd.html">
        CI/CD Integrations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b07357c6.js" defer></script><script src="/assets/js/2.11174f41.js" defer></script><script src="/assets/js/10.b253edbe.js" defer></script>
  </body>
</html>
